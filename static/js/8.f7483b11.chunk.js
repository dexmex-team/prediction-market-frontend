(this["webpackJsonpdexmex-frontend-v2"]=this["webpackJsonpdexmex-frontend-v2"]||[]).push([[8],{839:function(e,t,n){"use strict";n.r(t);var r,c,a,i,s,o,j,u,b,d,l,p,O,f,m,h=n(33),x=n(0),g=n(161),v=n(41),w=n(11),y=n(6),k=n(2),C=n.n(k),S=n(21),A=n(20),D=n(39),_=n(60),E=n(55),R=n(236),M=function(){var e=Object(_.c)().account,t=Object(R.a)().fastRefresh,n=Object(E.e)(),r=Object(x.useState)({amount:D.a.constants.Zero,rewardDebt:D.a.constants.Zero}),c=Object(A.a)(r,2),a=c[0],i=c[1];return Object(x.useEffect)((function(){e&&function(){var t=Object(S.a)(C.a.mark((function t(){var r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.userInfo(e);case 2:r=t.sent,i({amount:r.amount,rewardDebt:r.rewardDebt});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e,t,n]),a},Q=n(68),z=function(){var e=Object(R.a)().fastRefresh,t=Object(E.e)(),n=Object(E.a)(Object(Q.b)()),r=Object(x.useState)({supply:D.a.constants.Zero,rewards:D.a.constants.Zero}),c=Object(A.a)(r,2),a=c[0],i=c[1];return Object(x.useEffect)((function(){(function(){var e=Object(S.a)(C.a.mark((function e(){var r,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.balanceOf(Object(Q.e)());case 2:return r=e.sent,e.next=5,t.totalRewards();case 5:c=e.sent,i({supply:r,rewards:c});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[e,t,n]),a},F=n(230),q=n(238),G=n(5),I=(w.f,Object(y.e)(w.p)(r||(r=Object(h.a)(["\n  width: 100%;\n  flex: 1;\n  "," {\n    min-width: 240px;\n  }\n"])),(function(e){return e.theme.mediaQueries.sm})),Object(y.e)(w.G).attrs({as:"h1",size:"xl"})(c||(c=Object(h.a)(["\n  margin-bottom: 24px;\n"])))),P=Object(y.e)(w.mb)(a||(a=Object(h.a)(["\n  font-size: 20px;\n  font-weight: 600;\n"]))),T=y.e.div(i||(i=Object(h.a)(["\n  background: ",";\n  padding-top: 40px;\n  margin-bottom: 32px;\n  padding-bottom: 32px;\n"])),(function(e){return e.theme.colors.backgroundDisabled})),U=(Object(y.e)(w.m)(s||(s=Object(h.a)(["\n  margin-right: 0px;\n  margin-left: auto;\n  display: block;\n"]))),function(){return Object(G.jsx)(T,{children:Object(G.jsx)(q.a,{children:Object(G.jsx)(w.F,{justifyContent:"space-between",flexDirection:["column",null,"row"],children:Object(G.jsxs)(w.F,{flexDirection:"column",children:[Object(G.jsx)(I,{children:"Polygon Staking"}),Object(G.jsx)(P,{children:"Stake DEXM and Earn Rewards"})]})})})})}),X=n(15),Z=n(118),L=n(119),J=n(31),N={approvalState:"idle",confirmState:"idle"},B=function(e,t){switch(t.type){case"requires_approval":return Object(X.a)(Object(X.a)({},e),{},{approvalState:"success"});case"approve_sending":return Object(X.a)(Object(X.a)({},e),{},{approvalState:"loading"});case"approve_receipt":return Object(X.a)(Object(X.a)({},e),{},{approvalState:"success"});case"approve_error":return Object(X.a)(Object(X.a)({},e),{},{approvalState:"fail"});case"confirm_sending":return Object(X.a)(Object(X.a)({},e),{},{confirmState:"loading"});case"confirm_receipt":return Object(X.a)(Object(X.a)({},e),{},{confirmState:"success"});case"confirm_error":return Object(X.a)(Object(X.a)({},e),{},{confirmState:"fail"});default:return e}},W=function(e){var t=e.onApprove,n=e.onConfirm,r=e.onRequiresApproval,c=e.onSuccess,a=void 0===c?Z.noop:c,i=e.onApproveSuccess,s=void 0===i?Z.noop:i,o=Object(J.b)().t,j=Object(_.c)().account,u=Object(x.useReducer)(B,N),b=Object(A.a)(u,2),d=b[0],l=b[1],p=Object(x.useRef)(r),O=Object(L.a)().toastError;return Object(x.useEffect)((function(){j&&p.current&&p.current().then((function(e){e&&l({type:"requires_approval"})}))}),[j,p,l]),{isApproving:"loading"===d.approvalState,isApproved:"success"===d.approvalState,isConfirming:"loading"===d.confirmState,isConfirmed:"success"===d.confirmState,handleApprove:function(){var e=Object(S.a)(C.a.mark((function e(){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return n=e.sent,l({type:"approve_sending"}),e.next=7,n.wait();case 7:(r=e.sent).status&&(l({type:"approve_receipt"}),s({state:d,receipt:r})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),l({type:"approve_error"}),O(o("Error"),o("Please try again. Confirm the transaction and make sure you are paying enough gas!"));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),handleConfirm:function(){var e=Object(S.a)(C.a.mark((function e(){var t,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l({type:"confirm_sending"}),e.prev=1,e.next=4,n();case 4:return t=e.sent,e.next=7,t.wait();case 7:(r=e.sent).status&&(l({type:"confirm_receipt"}),a({state:d,receipt:r})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),l({type:"confirm_error"}),O(o("Error"),o("Please try again. Confirm the transaction and make sure you are paying enough gas!"));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}()}},H=n(100),K=n(233),V=n(53),Y=n.n(V),$=n(101),ee=function(e){var t=Object($.a)(),n=t.login,r=t.logout,c=Object(w.Bb)(n,r).onPresentConnectModal;return Object(G.jsx)(w.m,Object(X.a)(Object(X.a)({onClick:c},e),{},{children:"Unlock Wallet"}))},te=y.e.div(o||(o=Object(h.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr;\n  justify-content: center;\n  "," {\n    grid-template-columns: 1fr 24px 1fr;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),ne=Object(y.e)(w.m)(j||(j=Object(h.a)(["\n  width: 100%;\n  "," {\n    min-width: 160px;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),re={width:"24px",color:"textDisabled"},ce=Object(y.e)(w.y).attrs(re)(u||(u=Object(h.a)(["\n  display: none;\n  "," {\n    display: block;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),ae=Object(y.e)(w.x).attrs(re)(b||(b=Object(h.a)(["\n  display: block;\n  "," {\n    display: none;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),ie=Object(G.jsx)(w.f,{spin:!0,color:"currentColor"}),se=function(e){e.isApproveDisabled;var t=e.isApproving,n=e.isConfirming,r=e.isConfirmDisabled,c=e.onApprove,a=e.onConfirm;return Object(G.jsxs)(te,{children:[Object(G.jsx)(w.k,{children:Object(G.jsx)(ne,{disabled:n,onClick:c,endIcon:t?ie:void 0,isLoading:t,children:t?"Approving":"Approve"})}),Object(G.jsxs)(w.F,{justifyContent:"center",children:[Object(G.jsx)(ce,{}),Object(G.jsx)(ae,{})]}),Object(G.jsx)(w.k,{children:Object(G.jsx)(ne,{onClick:a,disabled:r,isLoading:n,endIcon:n?ie:void 0,children:n?"Confirming":"Confirm"})})]})},oe=Object(y.e)(w.p)(d||(d=Object(h.a)(["\n  width: 100%;\n  flex: 1;\n  margin-left: auto;\n  margin-right: auto;\n  max-width: 437px;\n  "," {\n    min-width: 240px;\n  }\n"])),(function(e){return e.theme.mediaQueries.sm})),je=Object(y.e)(w.G).attrs({as:"h3",size:"lg"})(l||(l=Object(h.a)(["\n  margin-bottom: 4px;\n  text-align: right;\n  margin-bottom: 15px;\n"]))),ue=Object(G.jsx)(w.f,{spin:!0,color:"currentColor"}),be=function(){var e=Object(x.useState)(""),t=Object(A.a)(e,2),n=t[0],r=t[1],c=Object(_.c)().account,a=Object(x.useState)(!1),i=Object(A.a)(a,2),s=i[0],o=(i[1],Object(K.d)()),j=Object(K.a)(Object(Q.b)()),u=new Y.a(n).times(new Y.a(10).pow(18)),b=Object(F.e)(Object(H.b)(Object(Q.b)()).balance),d=M().amount,l=W({onRequiresApproval:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.methods.allowance(c,o.address).call();case 3:return t=e.sent,n=new Y.a(t),e.abrupt("return",n.gt(0));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),onApprove:function(){return D(!1),j.approve(o.address,u.toString())},onConfirm:function(){return D(!1),o.deposit(u.toString())}}),p=l.isApproving,O=l.isApproved,f=l.isConfirmed,m=l.isConfirming,h=l.handleApprove,g=l.handleConfirm,v=Object(x.useState)(!1),y=Object(A.a)(v,2),k=y[0],D=y[1];return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(oe,{children:Object(G.jsxs)(w.q,{children:[Object(G.jsx)(je,{children:"Stake DEXM"}),c?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(w.g,{value:n,onUserInput:function(e){r(e)},inputProps:{disabled:!c||s}}),Object(G.jsx)(w.k,{style:{textAlign:"right",marginTop:15},children:Object(G.jsx)(w.m,{scale:"xs",variant:"tertiary",onClick:function(){r(b.toString())},disabled:!1,children:"Use Max"})})]}):"",Object(G.jsx)(w.k,{style:{marginTop:15},children:c?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(se,{isApproveDisabled:f||m||O,isApproving:p,isConfirmDisabled:!O||u.isNaN()||u.eq(0),isConfirming:m,onApprove:h,onConfirm:g}),d.gt("0")?Object(G.jsx)(w.m,{width:"100%",style:{marginTop:10},onClick:function(){return D(!0),o.withdraw(d.toString())},isLoading:k,endIcon:k?ue:void 0,disabled:m||p,children:k?"Unstaking":"Unstake and Claim Rewards"}):""]}):Object(G.jsx)(ee,{width:"100%"})})]})})})},de=Object(y.e)(w.p)(p||(p=Object(h.a)(["\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  "," {\n    margin: 0;\n    max-width: none;\n  }\n"])),(function(e){return e.theme.mediaQueries.lg})),le=Object(y.e)(w.q)(O||(O=Object(h.a)(["\n  text-align: center;\n"]))),pe=Object(y.e)(w.h)(f||(f=Object(h.a)(["\n  align-items: stretch;\n  justify-content: justify;\n  margin-bottom: 32px;\n  & > div {\n    grid-column: span 6;\n    width: 100%;\n  }\n  "," {\n    & > div {\n      grid-column: span 8;\n    }\n  }\n  "," {\n    & > div {\n      grid-column: span 6;\n    }\n  }\n"])),(function(e){return e.theme.mediaQueries.sm}),(function(e){return e.theme.mediaQueries.lg})),Oe=Object(y.e)(w.G).attrs({size:"xl"})(m||(m=Object(h.a)(["\n  line-height: 44px;\n  color: ",";\n"])),(function(e){return e.theme.colors.textSubtle}));t.default=function(){var e=Object(v.a)().account,t=z(),n=t.supply,r=t.rewards,c=M(),a=c.amount,i=c.rewardDebt;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(g.a,{children:Object(G.jsx)("title",{children:"Dexmex | Staking"})}),Object(G.jsx)(U,{}),Object(G.jsxs)(q.a,{children:[Object(G.jsxs)(pe,{children:[Object(G.jsx)(de,{children:Object(G.jsxs)(le,{children:[Object(G.jsx)(w.G,{color:"contrast",size:"lg",children:"DEXM Staked"}),Object(G.jsxs)(Oe,{children:[Object(F.a)(n,2)," DEXM"]})]})}),Object(G.jsx)(de,{children:Object(G.jsxs)(le,{children:[Object(G.jsx)(w.G,{color:"contrast",size:"lg",children:"Total  Rewards"}),Object(G.jsxs)(Oe,{children:[Object(F.a)(r,2)," MATIC"]})]})}),e?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(de,{children:Object(G.jsxs)(le,{children:[Object(G.jsx)(w.G,{color:"contrast",size:"lg",children:"User Staked"}),Object(G.jsxs)(Oe,{children:[Object(F.a)(a,2)," DEXM"]})]})}),Object(G.jsx)(de,{children:Object(G.jsxs)(le,{children:[Object(G.jsx)(w.G,{color:"contrast",size:"lg",children:"Pending Rewards"}),Object(G.jsxs)(Oe,{children:[Object(F.a)(i,2)," MATIC"]})]})})]}):""]}),Object(G.jsx)(be,{})]})]})}}}]);
//# sourceMappingURL=8.f7483b11.chunk.js.map